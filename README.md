# بوت تليجرام متصل بـ Manus AI (Node.js)

هذا المشروع هو عبارة عن بوت تليجرام بسيط مكتوب بلغة JavaScript (Node.js)، يربط محادثات المستخدمين بخدمات الذكاء الاصطناعي من Manus AI (عبر واجهة OpenAI API).

## المتطلبات الأساسية

1.  **Node.js:** الإصدار 16 أو أحدث.
2.  **توكن بوت تليجرام:** التوكن الخاص بك (المقدم: `8216411891:AAE_PjNCSG1grB_IQy56ETCveyJDToLEXD0`).
3.  **مفتاح API للذكاء الاصطناعي:** مفتاح `OPENAI_API_KEY` الذي تستخدمه للوصول إلى نماذج Manus AI.

## محتويات المشروع

| الملف | الوصف |
| :--- | :--- |
| `index.js` | الكود الرئيسي للبوت الذي يحتوي على منطق الاتصال بتليجرام و Manus AI. |
| `package.json` | ملف تعريف المشروع الذي يسرد المكتبات المطلوبة (`node-telegram-bot-api`, `openai`). |
| `README.md` | هذا الملف الذي يحتوي على التعليمات. |

## الإعداد والتشغيل

### 1. الاستنساخ وتثبيت التبعيات

إذا كنت تستخدم Git/GitHub، قم باستنساخ المشروع ثم تثبيت المكتبات باستخدام `pnpm` أو `npm`:

```bash
# قم باستبدال الرابط برابط مستودعك بعد الرفع
# git clone <YOUR_REPO_URL>
# cd <YOUR_PROJECT_FOLDER>

pnpm install
# أو
# npm install
```

### 2. إعداد مفاتيح التوكن والذكاء الاصطناعي

**لتشغيل البوت بأمان، يجب عليك استخدام متغيرات البيئة.**

قم بإنشاء ملف `.env` في جذر المشروع (وتأكد من إضافته إلى ملف `.gitignore` لعدم رفعه على GitHub) وضع فيه مفتاح API الخاص بك:

```
# .env
OPENAI_API_KEY="مفتاح_الـ_API_الخاص_بك"
```

**ملاحظة الأمان:** تم نقل توكن البوت إلى متغير البيئة `BOT_TOKEN` لزيادة الأمان. إذا لم يتم تعيين المتغير، سيتم استخدام التوكن القديم كخيار احتياطي.


### 3. تشغيل البوت

يمكنك تشغيل البوت باستخدام الأمر التالي:

```bash
node index.js
```

للتشغيل المستمر على خادم، يفضل استخدام أدوات مثل `pm2`:

```bash
# تثبيت pm2 عالمياً
# npm install -g pm2

# تشغيل البوت باستخدام pm2
pm2 start index.js --name telegram-ai-bot
```

## خطوات الرفع على GitHub

1.  **تهيئة المستودع:**
    ```bash
    git init
    git add .
    git commit -m "Initial commit: Telegram AI Bot (Node.js)"
    ```

2.  **إنشاء مستودع جديد على GitHub.**

3.  **الربط والرفع:**
    ```bash
    git remote add origin <YOUR_NEW_REPO_URL>
    git push -u origin master
    ```

**تذكر إضافة ملف `.gitignore` لمنع رفع ملفات مثل `node_modules` أو `.env` إلى GitHub.**

## الوظائف والميزات

*   **ذاكرة المحادثة (Conversation History):** البوت الآن يتذكر سياق محادثتك السابقة، مما يسمح بمحادثات أكثر سلاسة وطبيعية.
*   **الأوامر الوظيفية الجديدة:**
    *   **`/start`:** بدء المحادثة والترحيب، وتعيين النموذج الافتراضي (gemini-2.5-flash).
    *   **`/help`:** عرض قائمة الأوامر المتاحة.
    *   **`/newchat`:** مسح سجل المحادثة الحالي وبدء محادثة جديدة.
    *   **`/model [gemini/gpt]`:** لتغيير نموذج الذكاء الاصطناعي المستخدم (مثال: `/model gpt`).

    *   **`/summarize [نص]`:** لتلخيص النص الذي يليه.
    *   **`/translate [لغة] [نص]`:** لترجمة النص إلى اللغة المطلوبة (مثال: `/translate English مرحبا`).
    *   **`/image [وصف]`:** لتوليد صورة باستخدام وصف نصي (مدعوم بـ DALL-E 3).
*   **معالجة الرسائل النصية:** تم تحديث البوت لاستخدام نموذج **`gemini-2.5-flash`** الأكثر قوة بشكل افتراضي، مع إمكانية التبديل إلى `gpt-4.1-mini` باستخدام الأمر `/model`.
*   **معالجة الرسائل غير النصية:** تمت إضافة معالج للرسائل غير النصية (مثل الصور والملفات) لتنبيه المستخدم بأن البوت يدعم النصوص والأوامر فقط.

